<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SNEAI - Your Intelligent Assistant</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
    body { display: flex; flex-direction: column; min-height: 100vh; background: #f8f9fa; color: #212529; transition: background 0.3s, color 0.3s; }
    body.dark-theme { background: #121212; color: #f1f1f1; }

    /* HEADER */
    .header { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; border-bottom: 1px solid #ccc; position: sticky; top: 0; background: inherit; z-index: 10; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .logo { display: flex; align-items: center; gap: 8px; }
    .logo h1 { font-size: 1.5rem; }
    .tagline { font-size: 0.85rem; color: #666; }

    /* CHAT */
    .chat-container { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; }
    .message { display: flex; align-items: flex-end; gap: 8px; animation: fadeInUp 0.3s ease; }
    @keyframes fadeInUp { from {opacity:0;transform:translateY(5px);} to {opacity:1;transform:translateY(0);} }
    .message-content { padding: 10px 14px; border-radius: 14px; line-height: 1.4; font-size: 0.95rem; max-width: 80%; word-wrap: break-word; }
    .user-message .message-content { background: #4a90e2; color: #fff; border-bottom-right-radius: 0; margin-left: auto; }
    .ai-message .message-content { background: #e9ecef; border-bottom-left-radius: 0; display: flex; align-items: center; }
    body.dark-theme .ai-message .message-content { background: #333; color: #f1f1f1; }
    .ai-avatar { width: 32px; height: 32px; border-radius: 50%; background: #4a90e2; color: white; display: flex; align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0; }
    .message-time { font-size: 0.7rem; opacity: 0.6; margin-top: 4px; text-align: right; }

    /* INPUT */
    .input-container { display: flex; gap: 8px; border-top: 1px solid #ccc; padding: 8px; background: inherit; position: sticky; bottom: 0; }
    #user-input { flex: 1; padding: 10px 12px; border: 1px solid #aaa; border-radius: 12px; font-size: 1rem; outline: none; }
    #send-btn { background: #4a90e2; color: white; border: none; border-radius: 10px; padding: 0 18px; cursor: pointer; font-size: 1.2rem; transition: background 0.3s; }
    #send-btn:hover { background: #3b78c4; }

    /* FAB MENU */
    .fab-container { position: fixed; bottom: 80px; right: 20px; z-index: 100; display: flex; flex-direction: column; align-items: flex-end; gap: 8px; }
    .fab-btn { background: #4a90e2; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; font-size: 1.3rem; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.2); transition: transform 0.2s; }
    .fab-btn:hover { transform: scale(1.1); background: #3b78c4; }
    .fab-options { display: none; flex-direction: column; gap: 6px; }
    .fab-options.show { display: flex; }

    /* MODAL */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 10; }
    .modal-content { background: #fff; padding: 20px; border-radius: 10px; max-width: 400px; width: 90%; }
    body.dark-theme .modal-content { background: #333; color: #f1f1f1; }
    .modal .close { float: right; font-size: 1.4rem; cursor: pointer; }

    footer { text-align: center; font-size: 0.85rem; padding: 8px; color: #666; }
    body.dark-theme footer { color: #aaa; }

    @media (max-width: 500px) {
      .message-content { max-width: 90%; font-size: 0.9rem; }
      #user-input { font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">
      <i class="fas fa-robot"></i>
      <h1>SNEAI</h1>
      <span class="tagline">Your Intelligent Assistant</span>
    </div>
  </div>

  <div class="chat-container" id="chat-box"></div>

  <div class="input-container">
    <input id="user-input" placeholder="Ask me anything..." autocomplete="off" />
    <button id="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
  </div>

  <!-- Floating Action Button -->
  <div class="fab-container">
    <div class="fab-options" id="fab-options">
      <button class="fab-btn" onclick="startVoiceRecognition()" title="Speak"><i class="fas fa-microphone"></i></button>
      <button class="fab-btn" onclick="toggleTheme()" title="Theme"><i class="fas fa-moon"></i></button>
      <button class="fab-btn" onclick="showTeachModal()" title="Teach AI"><i class="fas fa-brain"></i></button>
      <button class="fab-btn" onclick="clearChat()" title="Clear Chat"><i class="fas fa-trash"></i></button>
    </div>
    <button class="fab-btn" onclick="toggleFab()"><i class="fas fa-plus"></i></button>
  </div>

  <!-- Teach Modal -->
  <div id="teach-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeTeachModal()">&times;</span>
      <h2>Teach SNEAI</h2>
      <input id="pattern" placeholder="When I say..." style="width:100%;margin-bottom:8px;">
      <textarea id="response" placeholder="SNEAI replies with..." style="width:100%;height:80px;"></textarea>
      <button onclick="teachAI()" style="margin-top:10px; padding:8px 12px; background:#4a90e2; color:white; border:none; border-radius:5px; cursor:pointer;">Teach</button>
    </div>
  </div>

  <footer>Created by Aman Gupta (2025)</footer>

  <script>
    let chatHistory = [];
    let recognition, synth, isSpeechEnabled = false;
    let learnedResponses = JSON.parse(localStorage.getItem('sneai_custom_responses') || '{}');

    function toggleFab() {
      document.getElementById('fab-options').classList.toggle('show');
    }

    function initSpeechRecognition() {
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'en-US';
        recognition.onresult = e => { document.getElementById("user-input").value = e.results[0][0].transcript; sendMessage(); };
        isSpeechEnabled = true;
      }
      if ('speechSynthesis' in window) synth = window.speechSynthesis;
    }

    function startVoiceRecognition() {
      if (!isSpeechEnabled) return addMessage("Voice recognition not supported.", 'ai');
      recognition.start(); addMessage("Listening...", 'ai');
    }

    function speakResponse(text) { if (!synth) return; synth.cancel(); synth.speak(new SpeechSynthesisUtterance(text)); }

    function sendMessage() {
      const input = document.getElementById("user-input").value.trim();
      if (!input) return;
      addMessage(input, 'user');
      document.getElementById("user-input").value = "";
      setTimeout(() => {
        let reply = learnedResponses[input.toLowerCase()] || `This is a sample AI response for: ${input}`;
        addMessage(reply, 'ai');
        speakResponse(reply);
        saveChatHistory();
      }, 700);
    }

    function addMessage(text, sender) {
      const chatBox = document.getElementById("chat-box");
      const msg = document.createElement("div");
      msg.className = `message ${sender}-message`;
      msg.innerHTML = sender === 'ai'
        ? `<div class="ai-avatar">ðŸ¤–</div><div class="message-content"><p>${text}</p><div class="message-time">${getTime()}</div></div>`
        : `<div class="message-content"><p>${text}</p><div class="message-time">${getTime()}</div></div>`;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
      chatHistory.push({role: sender, content: text});
    }

    function getTime() {
      const now = new Date(), h = now.getHours(), m = now.getMinutes();
      const ampm = h >= 12 ? 'PM' : 'AM';
      return `${h % 12 || 12}:${m<10?'0'+m:m} ${ampm}`;
    }

    function clearChat() { document.getElementById("chat-box").innerHTML = ''; chatHistory = []; saveChatHistory(); }
    function toggleTheme() { document.body.classList.toggle('dark-theme'); }
    function teachAI() {
      const p = document.getElementById("pattern").value.trim().toLowerCase();
      const r = document.getElementById("response").value.trim();
      if (!p || !r) return alert("Both fields required!");
      learnedResponses[p] = r;
      localStorage.setItem('sneai_custom_responses', JSON.stringify(learnedResponses));
      addMessage(`Learned: "${p}" â†’ "${r}"`, 'ai');
      closeTeachModal();
    }

    function showTeachModal() { document.getElementById("teach-modal").style.display = "flex"; }
    function closeTeachModal() { document.getElementById("teach-modal").style.display = "none"; }

    function saveChatHistory() { localStorage.setItem('sneai_chat_history', JSON.stringify(chatHistory.slice(-100))); }
    function loadChatHistory() {
      const saved = JSON.parse(localStorage.getItem('sneai_chat_history') || "[]");
      chatHistory = saved; for (const m of chatHistory) addMessage(m.content, m.role);
    }

    document.getElementById("user-input").addEventListener("keydown", e => { if (e.key === "Enter") { e.preventDefault(); sendMessage(); } });
    document.addEventListener("DOMContentLoaded", () => {
      loadChatHistory(); initSpeechRecognition();
      if (chatHistory.length === 0) addMessage("Hello! I'm SNEAI, your intelligent assistant. Ask me anything!", 'ai');
    });
    window.onclick = e => { if (e.target == document.getElementById("teach-modal")) closeTeachModal(); }
  </script>
</body>
</html>
